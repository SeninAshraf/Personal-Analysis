<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islamic Productivity Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary: #000000;
            --primary-light: #333333;
            --secondary: #222222;
            --success: #4CAF50;
            --warning: #FF9800;
            --danger: #F44336;
            --dark: #212121;
            --light: #f5f5f5;
            --lighter: #ffffff;
            --sidebar-width: 280px;
            --arabic-font: 'Amiri', serif;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Tajawal', sans-serif;
        }
        
        body {
            background-color: var(--lighter);
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Minimalist Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--lighter);
            position: fixed;
            height: 100%;
            overflow-y: auto;
            transition: all 0.3s;
            z-index: 1000;
            box-shadow: 2px 0 15px rgba(0,0,0,0.05);
            border-left: 1px solid rgba(0,0,0,0.1);
        }
        
        .sidebar-header {
            padding: 25px 20px;
            text-align: center;
            position: relative;
            z-index: 1;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .sidebar-header h2 {
            margin: 0;
            font-size: 1.5rem;
            color: var(--dark);
            font-weight: 700;
        }
        
        .sidebar-header h2::after {
            content: "مرحبا بك";
            display: block;
            font-family: var(--arabic-font);
            font-size: 1.2rem;
            color: var(--primary);
            margin-top: 5px;
        }
        
        .sidebar-menu {
            padding: 20px 0;
        }
        
        .menu-item {
            padding: 15px 25px;
            display: flex;
            align-items: center;
            color: var(--dark);
            text-decoration: none;
            transition: all 0.3s;
            border-right: 4px solid transparent;
            margin: 5px 0;
            font-size: 1.05rem;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .menu-item:hover, .menu-item.active {
            background-color: rgba(0,0,0,0.03);
            color: var(--primary);
            border-right: 4px solid var(--primary);
        }
        
        .menu-item i {
            margin-left: 12px;
            font-size: 1.1rem;
            color: var(--primary);
        }
        
        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-right: var(--sidebar-width);
            padding: 15px;
            transition: all 0.3s;
        }
        
        /* Minimalist Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--lighter);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            position: relative;
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        .header-title h1 {
            font-size: 1.3rem;
            color: var(--dark);
            margin: 0;
            font-weight: 700;
        }
        
        .header-title p {
            color: var(--dark);
            font-size: 0.8rem;
            margin: 5px 0 0;
            opacity: 0.7;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .user-name {
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.3rem;
            color: var(--dark);
            cursor: pointer;
            margin-left: 15px;
        }
        
        /* Minimalist Card Design */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .card {
            background-color: var(--lighter);
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 15px;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .card-title {
            font-size: 1.1rem;
            color: var(--dark);
            margin: 0;
            display: flex;
            align-items: center;
            font-weight: 600;
        }
        
        .card-title i {
            margin-left: 8px;
            color: var(--primary);
        }
        
        .card-actions {
            display: flex;
            gap: 8px;
        }
        
        .card-btn {
            background: none;
            border: none;
            color: var(--dark);
            cursor: pointer;
            font-size: 0.9rem;
            transition: color 0.3s;
            opacity: 0.7;
        }
        
        .card-btn:hover {
            color: var(--primary);
            opacity: 1;
        }
        
        /* Prayer Tracker */
        .prayer-tracker {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .prayer {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 8px;
            border-radius: 8px;
            background-color: rgba(0,0,0,0.02);
            transition: all 0.3s;
            position: relative;
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .prayer:hover {
            background-color: rgba(0,0,0,0.05);
        }
        
        .prayer-name {
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--dark);
            font-family: var(--arabic-font);
            font-size: 1rem;
        }
        
        .prayer-time {
            font-size: 0.8rem;
            color: var(--dark);
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .prayer-checkbox {
            appearance: none;
            width: 22px;
            height: 22px;
            border: 2px solid var(--primary);
            border-radius: 5px;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            background-color: var(--lighter);
        }
        
        .prayer-checkbox:checked {
            background-color: var(--primary);
        }
        
        .prayer-checkbox:checked::after {
            content: '✓';
            position: absolute;
            color: white;
            font-size: 12px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .prayer-streak {
            font-size: 0.75rem;
            color: var(--success);
            font-weight: 600;
            margin-top: 8px;
        }
        
        /* Clean Counter */
        .clean-counter {
            text-align: center;
            margin-bottom: 15px;
            padding: 12px;
            background-color: rgba(76, 175, 80, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(76, 175, 80, 0.1);
        }
        
        .counter-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--success);
            margin: 8px 0;
            font-family: var(--arabic-font);
        }
        
        .counter-label {
            color: var(--dark);
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .streak-display {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 12px 0;
            background-color: rgba(76, 175, 80, 0.1);
            padding: 6px 12px;
            border-radius: 20px;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }
        
        .streak-count {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--success);
            margin-left: 6px;
        }
        
        .streak-label {
            color: var(--dark);
            font-weight: 500;
            font-size: 0.85rem;
        }
        
        .counter-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .btn {
            padding: 10px 18px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .btn i {
            margin-left: 6px;
            font-size: 0.9rem;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background-color: rgba(0,0,0,0.05);
        }
        
        /* Expense Tracker */
        .expense-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 12px;
            background-color: rgba(0,0,0,0.02);
            border-radius: 8px;
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .expense-total {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--dark);
        }
        
        .expense-period {
            color: var(--dark);
            font-size: 0.85rem;
            opacity: 0.7;
        }
        
        .expense-form {
            margin-bottom: 15px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
            font-size: 0.9rem;
        }
        
        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 6px;
            font-family: inherit;
            transition: border 0.3s;
            background-color: var(--lighter);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0,0,0,0.05);
        }
        
        .expense-list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
            border-radius: 6px;
            border: 1px solid rgba(0,0,0,0.1);
            padding: 0 8px;
        }
        
        .expense-list-header {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            font-weight: 600;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            margin-bottom: 5px;
        }
        
        .expense-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .expense-item:last-child {
            border-bottom: none;
        }
        
        .expense-info {
            flex: 1;
        }
        
        .expense-amount {
            font-weight: 700;
            color: var(--dark);
        }
        
        .expense-category {
            font-size: 0.8rem;
            color: var(--dark);
            margin-top: 3px;
            opacity: 0.7;
        }
        
        .expense-description {
            font-size: 0.85rem;
            color: var(--dark);
            margin-top: 3px;
            opacity: 0.8;
        }
        
        .expense-date {
            font-size: 0.8rem;
            color: var(--dark);
            opacity: 0.6;
        }
        
        .expense-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .action-btn {
            background: none;
            border: none;
            color: var(--dark);
            cursor: pointer;
            font-size: 0.9rem;
            transition: color 0.3s;
            opacity: 0.6;
        }
        
        .action-btn:hover {
            color: var(--primary);
            opacity: 1;
        }
        
        .delete-btn:hover {
            color: var(--danger);
        }
        
        /* Workout Tracker */
        .workout-check {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 15px;
            background-color: rgba(76, 175, 80, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(76, 175, 80, 0.1);
        }
        
        .workout-question {
            font-weight: 600;
            color: var(--dark);
            font-size: 0.95rem;
        }
        
        .workout-buttons {
            display: flex;
            gap: 8px;
        }
        
        .workout-day {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .workout-day:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .day-name {
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark);
            font-size: 1rem;
        }
        
        .exercises {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .exercise {
            background-color: rgba(0,0,0,0.05);
            color: var(--primary);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        /* Notes Section */
        .notes-container {
            margin-top: 15px;
        }
        
        .note-item {
            background-color: var(--lighter);
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }
        
        .note-item:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .note-title {
            font-weight: 600;
            color: var(--dark);
            font-size: 0.95rem;
        }
        
        .note-date {
            font-size: 0.75rem;
            color: var(--dark);
            opacity: 0.6;
        }
        
        .note-content {
            font-size: 0.9rem;
            color: var(--dark);
            line-height: 1.5;
        }
        
        .note-actions {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            margin-top: 8px;
        }
        
        /* Important Dates */
        .important-dates {
            list-style: none;
        }
        
        .date-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .date-item:last-child {
            border-bottom: none;
        }
        
        .date-info {
            flex: 1;
        }
        
        .date-label {
            font-weight: 600;
            color: var(--dark);
            font-size: 0.95rem;
        }
        
        .date-value {
            font-size: 0.85rem;
            color: var(--dark);
            margin-top: 3px;
            opacity: 0.7;
        }
        
        .days-ago {
            font-size: 0.8rem;
            color: var(--dark);
            opacity: 0.6;
        }
        
        /* Stats Container */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }
        
        .stat-card {
            background-color: var(--lighter);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border: 1px solid rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-3px);
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin: 5px 0;
            font-family: var(--arabic-font);
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: var(--dark);
            opacity: 0.8;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: var(--lighter);
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .modal-title {
            margin: 0;
            font-size: 1.2rem;
            color: var(--dark);
            font-weight: 700;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark);
            opacity: 0.6;
            transition: opacity 0.3s;
        }
        
        .close-modal:hover {
            opacity: 1;
            color: var(--danger);
        }
        
        .modal-footer {
            margin-top: 20px;
            display: flex;
            justify-content: flex-start;
            gap: 8px;
        }
        
        /* Tabs Styles */
        .tabs {
            display: flex;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            margin-bottom: 15px;
            overflow-x: auto;
            padding-bottom: 3px;
        }
        
        .tab {
            padding: 8px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
            font-weight: 500;
            color: var(--dark);
            opacity: 0.7;
            font-size: 0.9rem;
        }
        
        .tab.active {
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
            font-weight: 600;
            opacity: 1;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Arabic Content Styles */
        .arabic-text {
            font-family: var(--arabic-font);
            font-size: 1rem;
        }
        
        /* Responsive Styles */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-right: 0;
            }
            
            .mobile-menu-btn {
                display: block;
            }
        }
        
        @media (max-width: 768px) {
            .prayer-tracker {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
            }
            
            .prayer:nth-child(4), .prayer:nth-child(5) {
                grid-column: span 1.5;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .header-actions {
                margin-top: 12px;
                width: 100%;
                justify-content: space-between;
            }
            
            .stats-container {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .expense-summary {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 576px) {
            .prayer-tracker {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .prayer:nth-child(odd) {
                grid-column: span 1;
            }
            
            .counter-buttons {
                flex-direction: column;
                gap: 8px;
            }
            
            .btn {
                width: 100%;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .workout-check {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .workout-buttons {
                width: 100%;
                justify-content: space-between;
            }
            
            .btn {
                flex: 1;
            }
            
            .modal-content {
                width: 95%;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Minimalist Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>Islamic Productivity</h2>
            </div>
            <nav class="sidebar-menu">
                <a href="#" class="menu-item active" data-section="overview">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>نظرة عامة</span>
                </a>
                <a href="#" class="menu-item" data-section="prayer">
                    <i class="fas fa-mosque"></i>
                    <span>تتبع الصلاة</span>
                </a>
                <a href="#" class="menu-item" data-section="clean">
                    <i class="fas fa-calendar-check"></i>
                    <span>أيام نظيفة</span>
                </a>
                <a href="#" class="menu-item" data-section="expense">
                    <i class="fas fa-wallet"></i>
                    <span>تتبع المصروفات</span>
                </a>
                <a href="#" class="menu-item" data-section="workout">
                    <i class="fas fa-dumbbell"></i>
                    <span>تتبع التمارين</span>
                </a>
                <a href="#" class="menu-item" data-section="notes">
                    <i class="fas fa-sticky-note"></i>
                    <span>ملاحظات شخصية</span>
                </a>
                <a href="#" class="menu-item" data-section="dates">
                    <i class="fas fa-calendar-day"></i>
                    <span>تواريخ مهمة</span>
                </a>
            </nav>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content" id="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-title">
                    <h1 id="page-title">نظرة عامة</h1>
                    <p id="current-date">جارٍ تحميل التاريخ...</p>
                </div>
                <div class="header-actions">
                    <button class="mobile-menu-btn" id="mobile-menu-btn">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="user-profile">
                        <div class="user-avatar">م</div>
                        <div class="user-name">مسلم</div>
                    </div>
                </div>
            </header>
            
            <!-- Dashboard Sections -->
            <div class="dashboard">
                <!-- Overview Section (Default) -->
                <section class="dashboard-section active" id="overview-section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-calendar-alt"></i> ملخص الشهر</h3>
                        </div>
                        <div class="stats-container" id="month-summary">
                            <div class="stat-card">
                                <div class="stat-value" id="prayer-percentage">0%</div>
                                <div class="stat-label">إتمام الصلاة</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="clean-days">0</div>
                                <div class="stat-label">أيام نظيفة</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="workout-days">0</div>
                                <div class="stat-label">أيام التمارين</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="total-expenses">₹0</div>
                                <div class="stat-label">إجمالي المصروفات</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-mosque"></i> حالة الصلاة اليوم</h3>
                        </div>
                        <div class="prayer-tracker" id="today-prayers">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-calendar-check"></i> سلسلة الأيام النظيفة</h3>
                        </div>
                        <div class="clean-counter">
                            <div class="counter-label">عدد اليوم</div>
                            <div class="counter-value" id="overview-clean-counter">0</div>
                            <div class="streak-display">
                                <div class="streak-count" id="overview-clean-streak">0</div>
                                <div class="streak-label">يوم متتالي</div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Prayer Tracker Section -->
                <section class="dashboard-section" id="prayer-section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-mosque"></i> تتبع الصلاة</h3>
                            <div class="card-actions">
                                <button class="card-btn" id="view-prayer-history">
                                    <i class="fas fa-history"></i>
                                </button>
                                <button class="card-btn" id="prayer-settings">
                                    <i class="fas fa-cog"></i>
                                </button>
                            </div>
                        </div>
                        <div class="prayer-tracker">
                            <div class="prayer">
                                <div class="prayer-name">الفجر</div>
                                <div class="prayer-time" id="fajr-time">05:30 ص</div>
                                <input type="checkbox" class="prayer-checkbox" id="prayer-fajr">
                                <div class="prayer-streak" id="fajr-streak">0 يوم</div>
                            </div>
                            <div class="prayer">
                                <div class="prayer-name">الظهر</div>
                                <div class="prayer-time" id="dhuhr-time">01:30 م</div>
                                <input type="checkbox" class="prayer-checkbox" id="prayer-dhuhr">
                                <div class="prayer-streak" id="dhuhr-streak">0 يوم</div>
                            </div>
                            <div class="prayer">
                                <div class="prayer-name">العصر</div>
                                <div class="prayer-time" id="asr-time">04:45 م</div>
                                <input type="checkbox" class="prayer-checkbox" id="prayer-asr">
                                <div class="prayer-streak" id="asr-streak">0 يوم</div>
                            </div>
                            <div class="prayer">
                                <div class="prayer-name">المغرب</div>
                                <div class="prayer-time" id="maghrib-time">06:30 م</div>
                                <input type="checkbox" class="prayer-checkbox" id="prayer-maghrib">
                                <div class="prayer-streak" id="maghrib-streak">0 يوم</div>
                            </div>
                            <div class="prayer">
                                <div class="prayer-name">العشاء</div>
                                <div class="prayer-time" id="isha-time">08:15 م</div>
                                <input type="checkbox" class="prayer-checkbox" id="prayer-isha">
                                <div class="prayer-streak" id="isha-streak">0 يوم</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-chart-line"></i> إحصائيات الصلاة</h3>
                            <div class="card-actions">
                                <button class="card-btn" id="prayer-stats-period">
                                    <i class="fas fa-calendar"></i>
                                </button>
                            </div>
                        </div>
                        <div class="stats-container">
                            <div class="stat-card">
                                <div class="stat-value" id="weekly-prayers">0</div>
                                <div class="stat-label">هذا الأسبوع</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="monthly-prayers">0</div>
                                <div class="stat-label">هذا الشهر</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="prayer-consistency">0%</div>
                                <div class="stat-label">انتظام</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="best-streak">0</div>
                                <div class="stat-label">أفضل سلسلة</div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Clean Days Section -->
                <section class="dashboard-section" id="clean-section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-calendar-check"></i> عداد الأيام النظيفة</h3>
                            <div class="card-actions">
                                <button class="card-btn" id="view-clean-history">
                                    <i class="fas fa-history"></i>
                                </button>
                            </div>
                        </div>
                        <div class="clean-counter">
                            <div class="counter-label">عدد اليوم</div>
                            <div class="counter-value" id="clean-counter">0</div>
                            <div class="streak-display">
                                <div class="streak-count" id="clean-streak">0</div>
                                <div class="streak-label">يوم متتالي</div>
                            </div>
                        </div>
                        <div class="counter-buttons">
                            <button class="btn btn-primary" id="increment-clean">
                                <i class="fas fa-plus"></i> زيادة
                            </button>
                            <button class="btn btn-outline" id="reset-clean">
                                <i class="fas fa-redo"></i> إعادة تعيين
                            </button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-chart-pie"></i> إحصائيات الشهر</h3>
                        </div>
                        <div class="stats-container">
                            <div class="stat-card">
                                <div class="stat-value" id="clean-this-month">0</div>
                                <div class="stat-label">هذا الشهر</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="clean-percentage">0%</div>
                                <div class="stat-label">من أيام الشهر</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="clean-best-month">0</div>
                                <div class="stat-label">أفضل شهر</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="clean-total">0</div>
                                <div class="stat-label">إجمالي الأيام</div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Expense Tracker Section -->
                <section class="dashboard-section" id="expense-section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-wallet"></i> تتبع المصروفات</h3>
                            <div class="card-actions">
                                <button class="card-btn" id="add-expense">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="card-btn" id="view-expense-history">
                                    <i class="fas fa-history"></i>
                                </button>
                            </div>
                        </div>
                        <div class="tabs">
                            <div class="tab active" data-tab="all">الكل</div>
                            <div class="tab" data-tab="food">طعام</div>
                            <div class="tab" data-tab="transport">مواصلات</div>
                            <div class="tab" data-tab="bills">فواتير</div>
                            <div class="tab" data-tab="other">أخرى</div>
                        </div>
                        <div class="expense-summary">
                            <div>
                                <div class="expense-total" id="monthly-expense">₹0.00</div>
                                <div class="expense-period" id="expense-period">هذا الشهر</div>
                            </div>
                            <button class="btn btn-outline" id="reset-expenses-monthly">
                                <i class="fas fa-sync-alt"></i> إعادة تعيين
                            </button>
                        </div>
                        <div class="expense-list">
                            <div class="expense-list-header">
                                <span>التفاصيل</span>
                                <span>المبلغ</span>
                            </div>
                            <div id="expense-items">
                                <!-- Will be populated by JavaScript -->
                                <div class="expense-item empty">
                                    <div class="expense-info">لا توجد مصروفات مسجلة</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-chart-bar"></i> تحليل المصروفات</h3>
                        </div>
                        <div class="stats-container">
                            <div class="stat-card">
                                <div class="stat-value" id="daily-avg">₹0</div>
                                <div class="stat-label">متوسط يومي</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="weekly-avg">₹0</div>
                                <div class="stat-label">متوسط أسبوعي</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="top-category">-</div>
                                <div class="stat-label">أعلى فئة</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="savings">₹0</div>
                                <div class="stat-label">مدخرات محتملة</div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Workout Tracker Section -->
                <section class="dashboard-section" id="workout-section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-dumbbell"></i> تتبع التمارين</h3>
                            <div class="card-actions">
                                <button class="card-btn" id="add-workout">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="card-btn" id="view-workout-history">
                                    <i class="fas fa-history"></i>
                                </button>
                            </div>
                        </div>
                        <div class="workout-check">
                            <div class="workout-question">هل قمت بالتمارين اليوم؟</div>
                            <div class="workout-buttons">
                                <button class="btn btn-outline" id="workout-no">لا</button>
                                <button class="btn btn-primary" id="workout-yes">نعم</button>
                            </div>
                        </div>
                        <div id="workout-plan">
                            <div class="workout-day">
                                <div class="day-name">السبت</div>
                                <div class="exercises">
                                    <span class="exercise">تمارين كارديو</span>
                                    <span class="exercise">تمارين بطن</span>
                                </div>
                            </div>
                            <div class="workout-day">
                                <div class="day-name">الأحد</div>
                                <div class="exercises">
                                    <span class="exercise">تمارين قوة</span>
                                    <span class="exercise">تمارين ظهر</span>
                                </div>
                            </div>
                            <!-- More days will be added by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-chart-line"></i> إحصائيات التمارين</h3>
                        </div>
                        <div class="stats-container">
                            <div class="stat-card">
                                <div class="stat-value" id="weekly-workouts">0</div>
                                <div class="stat-label">هذا الأسبوع</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="monthly-workouts">0</div>
                                <div class="stat-label">هذا الشهر</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="workout-consistency">0%</div>
                                <div class="stat-label">انتظام</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="workout-streak">0</div>
                                <div class="stat-label">سلسلة حالية</div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Personal Notes Section -->
                <section class="dashboard-section" id="notes-section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-sticky-note"></i> ملاحظات شخصية</h3>
                            <div class="card-actions">
                                <button class="card-btn" id="add-note">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                        <div class="notes-container" id="notes-list">
                            <div class="note-item">
                                <div class="note-header">
                                    <div class="note-title">ملاحظة مثال</div>
                                    <div class="note-date">اليوم، 10:30 ص</div>
                                </div>
                                <div class="note-content">
                                    هذه ملاحظة مثال يمكنك تعديلها أو حذفها. يمكنك إضافة ملاحظاتك الشخصية هنا لتتبع أفكارك وتذكيراتك.
                                </div>
                                <div class="note-actions">
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Important Dates Section -->
                <section class="dashboard-section" id="dates-section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-calendar-day"></i> تواريخ مهمة</h3>
                            <div class="card-actions">
                                <button class="card-btn" id="add-date">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                        <ul class="important-dates" id="dates-list">
                            <li class="date-item">
                                <div class="date-info">
                                    <div class="date-label">رمضان</div>
                                    <div class="date-value">10 مارس - 8 أبريل 2024</div>
                                </div>
                                <div class="days-ago">قريبًا</div>
                            </li>
                            <li class="date-item">
                                <div class="date-info">
                                    <div class="date-label">عيد الفطر</div>
                                    <div class="date-value">9 أبريل 2024</div>
                                </div>
                                <div class="days-ago">قريبًا</div>
                            </li>
                            <li class="date-item">
                                <div class="date-info">
                                    <div class="date-label">يوم عرفة</div>
                                    <div class="date-value">15 يونيو 2024</div>
                                </div>
                                <div class="days-ago">بعد 3 أشهر</div>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-bell"></i> المناسبات القادمة</h3>
                        </div>
                        <ul class="important-dates" id="upcoming-dates">
                            <!-- Will be populated by JavaScript -->
                        </ul>
                    </div>
                </section>
            </div>
        </main>
    </div>
    
    <!-- Add Expense Modal -->
    <div class="modal" id="expense-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">إضافة مصروف جديد</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="expense-form">
                <div class="form-group">
                    <label class="form-label">المبلغ</label>
                    <input type="number" class="form-control" id="expense-amount" placeholder="أدخل المبلغ" required>
                </div>
                <div class="form-group">
                    <label class="form-label">الفئة</label>
                    <select class="form-control" id="expense-category" required>
                        <option value="">اختر الفئة</option>
                        <option value="food">طعام</option>
                        <option value="transport">مواصلات</option>
                        <option value="bills">فواتير</option>
                        <option value="shopping">تسوق</option>
                        <option value="other">أخرى</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">الوصف (اختياري)</label>
                    <input type="text" class="form-control" id="expense-description" placeholder="وصف المصروف">
                </div>
                <div class="form-group">
                    <label class="form-label">التاريخ</label>
                    <input type="date" class="form-control" id="expense-date" required>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">حفظ</button>
                    <button type="button" class="btn btn-outline close-modal">إلغاء</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Add Note Modal -->
    <div class="modal" id="note-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">إضافة ملاحظة جديدة</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="note-form">
                <div class="form-group">
                    <label class="form-label">العنوان</label>
                    <input type="text" class="form-control" id="note-title" placeholder="عنوان الملاحظة" required>
                </div>
                <div class="form-group">
                    <label class="form-label">المحتوى</label>
                    <textarea class="form-control" id="note-content" rows="5" placeholder="اكتب ملاحظتك هنا..." required></textarea>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">حفظ</button>
                    <button type="button" class="btn btn-outline close-modal">إلغاء</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Add Date Modal -->
    <div class="modal" id="date-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">إضافة تاريخ مهم</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="date-form">
                <div class="form-group">
                    <label class="form-label">المناسبة</label>
                    <input type="text" class="form-control" id="date-label" placeholder="اسم المناسبة" required>
                </div>
                <div class="form-group">
                    <label class="form-label">التاريخ</label>
                    <input type="date" class="form-control" id="date-value" required>
                </div>
                <div class="form-group">
                    <label class="form-label">التكرار (اختياري)</label>
                    <select class="form-control" id="date-repeat">
                        <option value="none">لا يتكرر</option>
                        <option value="yearly">سنويًا</option>
                        <option value="monthly">شهريًا</option>
                        <option value="weekly">أسبوعيًا</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">حفظ</button>
                    <button type="button" class="btn btn-outline close-modal">إلغاء</button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        // DOM Elements
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('main-content');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const menuItems = document.querySelectorAll('.menu-item');
        const dashboardSections = document.querySelectorAll('.dashboard-section');
        const currentDateEl = document.getElementById('current-date');
        const pageTitleEl = document.getElementById('page-title');
        
        // Prayer Tracker Elements
        const prayerCheckboxes = document.querySelectorAll('.prayer-checkbox');
        const prayerStreaks = document.querySelectorAll('.prayer-streak');
        
        // Clean Days Elements
        const cleanCounter = document.getElementById('clean-counter');
        const cleanStreak = document.getElementById('clean-streak');
        const incrementCleanBtn = document.getElementById('increment-clean');
        const resetCleanBtn = document.getElementById('reset-clean');
        
        // Expense Tracker Elements
        const expenseModal = document.getElementById('expense-modal');
        const addExpenseBtn = document.getElementById('add-expense');
        const closeModalBtns = document.querySelectorAll('.close-modal');
        const expenseForm = document.getElementById('expense-form');
        const expenseItems = document.getElementById('expense-items');
        
        // Notes Elements
        const noteModal = document.getElementById('note-modal');
        const addNoteBtn = document.getElementById('add-note');
        const noteForm = document.getElementById('note-form');
        const notesList = document.getElementById('notes-list');
        
        // Date Elements
        const dateModal = document.getElementById('date-modal');
        const addDateBtn = document.getElementById('add-date');
        const dateForm = document.getElementById('date-form');
        const datesList = document.getElementById('dates-list');
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            currentDateEl.textContent = now.toLocaleDateString('ar-EG', options);
            
            // Load saved data from localStorage
            loadPrayerData();
            loadCleanDaysData();
            loadExpensesData();
            loadNotesData();
            loadImportantDates();
            
            // Initialize prayer times based on current location
            updatePrayerTimes();
            
            // Set up event listeners
            setupEventListeners();
        });
        
        function setupEventListeners() {
            // Mobile menu toggle
            mobileMenuBtn.addEventListener('click', function() {
                sidebar.classList.toggle('active');
            });
            
            // Menu item clicks
            menuItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all menu items
                    menuItems.forEach(i => i.classList.remove('active'));
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Get the section to show
                    const sectionId = this.getAttribute('data-section') + '-section';
                    
                    // Hide all sections
                    dashboardSections.forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    // Show the selected section
                    document.getElementById(sectionId).classList.add('active');
                    
                    // Update page title
                    pageTitleEl.textContent = this.querySelector('span').textContent;
                    
                    // Close sidebar on mobile
                    if (window.innerWidth <= 992) {
                        sidebar.classList.remove('active');
                    }
                });
            });
            
            // Prayer checkbox changes
            prayerCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    updatePrayerData(this.id, this.checked);
                });
            });
            
            // Clean days buttons
            incrementCleanBtn.addEventListener('click', incrementCleanDays);
            resetCleanBtn.addEventListener('click', resetCleanDays);
            
            // Expense modal
            addExpenseBtn.addEventListener('click', () => expenseModal.style.display = 'flex');
            
            // Note modal
            addNoteBtn.addEventListener('click', () => {
                noteForm.reset();
                noteModal.style.display = 'flex';
            });
            
            // Date modal
            addDateBtn.addEventListener('click', () => {
                dateForm.reset();
                dateModal.style.display = 'flex';
            });
            
            // Close modals
            closeModalBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    this.closest('.modal').style.display = 'none';
                });
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });
            
            // Form submissions
            expenseForm.addEventListener('submit', addExpense);
            noteForm.addEventListener('submit', addNote);
            dateForm.addEventListener('submit', addImportantDate);
        }
        
        function updatePrayerTimes() {
            // In a real app, this would fetch prayer times based on location
            // For demo purposes, we'll use static times
            document.getElementById('fajr-time').textContent = '05:30 ص';
            document.getElementById('dhuhr-time').textContent = '01:30 م';
            document.getElementById('asr-time').textContent = '04:45 م';
            document.getElementById('maghrib-time').textContent = '06:30 م';
            document.getElementById('isha-time').textContent = '08:15 م';
        }
        
        function loadPrayerData() {
            // Load prayer data from localStorage
            const prayerData = JSON.parse(localStorage.getItem('prayerData')) || {};
            
            // Update checkboxes and streaks
            prayerCheckboxes.forEach(checkbox => {
                const prayerName = checkbox.id.split('-')[1];
                checkbox.checked = prayerData[prayerName]?.completed || false;
                
                // Update streak display
                const streakEl = document.getElementById(`${prayerName}-streak`);
                streakEl.textContent = `${prayerData[prayerName]?.streak || 0} يوم`;
            });
        }
        
        function updatePrayerData(prayerId, isCompleted) {
            const prayerName = prayerId.split('-')[1];
            let prayerData = JSON.parse(localStorage.getItem('prayerData')) || {};
            
            // Initialize prayer data if it doesn't exist
            if (!prayerData[prayerName]) {
                prayerData[prayerName] = { completed: false, streak: 0, lastUpdated: null };
            }
            
            // Update completion status
            prayerData[prayerName].completed = isCompleted;
            
            // Update streak if prayer was completed
            if (isCompleted) {
                const today = new Date().toDateString();
                const lastUpdated = prayerData[prayerName].lastUpdated;
                
                // If last updated was yesterday or not today, increment streak
                if (!lastUpdated || lastUpdated !== today) {
                    const yesterday = new Date();
                    yesterday.setDate(yesterday.getDate() - 1);
                    
                    if (!lastUpdated || lastUpdated === yesterday.toDateString()) {
                        prayerData[prayerName].streak += 1;
                    } else {
                        // Reset streak if not consecutive
                        prayerData[prayerName].streak = 1;
                    }
                    
                    prayerData[prayerName].lastUpdated = today;
                }
            }
            
            // Save to localStorage
            localStorage.setItem('prayerData', JSON.stringify(prayerData));
            
            // Update UI
            const streakEl = document.getElementById(`${prayerName}-streak`);
            streakEl.textContent = `${prayerData[prayerName].streak} يوم`;
        }
        
        function loadCleanDaysData() {
            const cleanData = JSON.parse(localStorage.getItem('cleanData')) || { count: 0, streak: 0, lastUpdated: null };
            
            // Update UI
            cleanCounter.textContent = cleanData.count;
            cleanStreak.textContent = cleanData.streak;
            document.getElementById('overview-clean-counter').textContent = cleanData.count;
            document.getElementById('overview-clean-streak').textContent = cleanData.streak;
        }
        
        function incrementCleanDays() {
            let cleanData = JSON.parse(localStorage.getItem('cleanData')) || { count: 0, streak: 0, lastUpdated: null };
            const today = new Date().toDateString();
            
            // Only increment if not already updated today
            if (cleanData.lastUpdated !== today) {
                cleanData.count += 1;
                
                // Update streak
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                
                if (!cleanData.lastUpdated || cleanData.lastUpdated === yesterday.toDateString()) {
                    cleanData.streak += 1;
                } else {
                    // Reset streak if not consecutive
                    cleanData.streak = 1;
                }
                
                cleanData.lastUpdated = today;
                
                // Save to localStorage
                localStorage.setItem('cleanData', JSON.stringify(cleanData));
                
                // Update UI
                cleanCounter.textContent = cleanData.count;
                cleanStreak.textContent = cleanData.streak;
                document.getElementById('overview-clean-counter').textContent = cleanData.count;
                document.getElementById('overview-clean-streak').textContent = cleanData.streak;
            }
        }
        
        function resetCleanDays() {
            if (confirm('هل أنت متأكد أنك تريد إعادة تعيين عداد الأيام النظيفة؟')) {
                const cleanData = { count: 0, streak: 0, lastUpdated: null };
                localStorage.setItem('cleanData', JSON.stringify(cleanData));
                
                // Update UI
                cleanCounter.textContent = '0';
                cleanStreak.textContent = '0';
                document.getElementById('overview-clean-counter').textContent = '0';
                document.getElementById('overview-clean-streak').textContent = '0';
            }
        }
        
        function loadExpensesData() {
            const expenses = JSON.parse(localStorage.getItem('expenses')) || [];
            updateExpensesUI(expenses);
        }
        
        function addExpense(e) {
            e.preventDefault();
            
            const amount = parseFloat(document.getElementById('expense-amount').value);
            const category = document.getElementById('expense-category').value;
            const description = document.getElementById('expense-description').value;
            const date = document.getElementById('expense-date').value || new Date().toISOString().split('T')[0];
            
            if (!amount || !category) return;
            
            const expense = {
                id: Date.now(),
                amount,
                category,
                description,
                date
            };
            
            let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
            expenses.push(expense);
            localStorage.setItem('expenses', JSON.stringify(expenses));
            
            updateExpensesUI(expenses);
            
            // Reset and close modal
            expenseForm.reset();
            expenseModal.style.display = 'none';
        }
        
        function updateExpensesUI(expenses) {
            expenseItems.innerHTML = '';
            
            if (expenses.length === 0) {
                expenseItems.innerHTML = '<div class="expense-item empty"><div class="expense-info">لا توجد مصروفات مسجلة</div></div>';
                return;
            }
            
            // Calculate monthly total
            const currentMonth = new Date().getMonth();
            const monthlyExpenses = expenses.filter(expense => {
                const expenseDate = new Date(expense.date);
                return expenseDate.getMonth() === currentMonth;
            });
            
            const monthlyTotal = monthlyExpenses.reduce((total, expense) => total + expense.amount, 0);
            document.getElementById('monthly-expense').textContent = `₹${monthlyTotal.toFixed(2)}`;
            document.getElementById('total-expenses').textContent = `₹${monthlyTotal.toFixed(0)}`;
            
            // Display expenses
            expenses.slice().reverse().forEach(expense => {
                const expenseEl = document.createElement('div');
                expenseEl.className = 'expense-item';
                expenseEl.innerHTML = `
                    <div class="expense-info">
                        <div class="expense-amount">₹${expense.amount.toFixed(2)}</div>
                        <div class="expense-category">${getCategoryName(expense.category)}</div>
                        ${expense.description ? `<div class="expense-description">${expense.description}</div>` : ''}
                    </div>
                    <div class="expense-date">${formatDate(expense.date)}</div>
                `;
                expenseItems.appendChild(expenseEl);
            });
        }
        
        function getCategoryName(category) {
            const categories = {
                'food': 'طعام',
                'transport': 'مواصلات',
                'bills': 'فواتير',
                'shopping': 'تسوق',
                'other': 'أخرى'
            };
            return categories[category] || category;
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ar-EG');
        }
        
        function loadNotesData() {
            const notes = JSON.parse(localStorage.getItem('notes')) || [];
            updateNotesUI(notes);
        }
        
        function addNote(e) {
            e.preventDefault();
            
            const title = document.getElementById('note-title').value;
            const content = document.getElementById('note-content').value;
            
            if (!title || !content) return;
            
            const note = {
                id: Date.now(),
                title,
                content,
                date: new Date().toISOString()
            };
            
            let notes = JSON.parse(localStorage.getItem('notes')) || [];
            notes.push(note);
            localStorage.setItem('notes', JSON.stringify(notes));
            
            updateNotesUI(notes);
            
            // Reset and close modal
            noteForm.reset();
            noteModal.style.display = 'none';
        }
        
        function updateNotesUI(notes) {
            notesList.innerHTML = '';
            
            if (notes.length === 0) {
                notesList.innerHTML = '<div class="note-item empty"><div class="note-content">لا توجد ملاحظات مسجلة</div></div>';
                return;
            }
            
            notes.slice().reverse().forEach(note => {
                const noteEl = document.createElement('div');
                noteEl.className = 'note-item';
                noteEl.innerHTML = `
                    <div class="note-header">
                        <div class="note-title">${note.title}</div>
                        <div class="note-date">${formatDateTime(note.date)}</div>
                    </div>
                    <div class="note-content">${note.content}</div>
                    <div class="note-actions">
                        <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                        <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                notesList.appendChild(noteEl);
            });
        }
        
        function formatDateTime(dateString) {
            const date = new Date(dateString);
            return date.toLocaleString('ar-EG');
        }
        
        function loadImportantDates() {
            const dates = JSON.parse(localStorage.getItem('importantDates')) || [];
            updateDatesUI(dates);
        }
        
        function addImportantDate(e) {
            e.preventDefault();
            
            const label = document.getElementById('date-label').value;
            const dateValue = document.getElementById('date-value').value;
            const repeat = document.getElementById('date-repeat').value;
            
            if (!label || !dateValue) return;
            
            const date = {
                id: Date.now(),
                label,
                date: dateValue,
                repeat
            };
            
            let dates = JSON.parse(localStorage.getItem('importantDates')) || [];
            dates.push(date);
            localStorage.setItem('importantDates', JSON.stringify(dates));
            
            updateDatesUI(dates);
            
            // Reset and close modal
            dateForm.reset();
            dateModal.style.display = 'none';
        }
        
        function updateDatesUI(dates) {
            datesList.innerHTML = '';
            
            if (dates.length === 0) {
                datesList.innerHTML = '<li class="date-item empty"><div class="date-info">لا توجد تواريخ مسجلة</div></li>';
                return;
            }
            
            dates.forEach(date => {
                const dateEl = document.createElement('li');
                dateEl.className = 'date-item';
                dateEl.innerHTML = `
                    <div class="date-info">
                        <div class="date-label">${date.label}</div>
                        <div class="date-value">${formatDate(date.date)}</div>
                    </div>
                    <div class="days-ago">${getDaysAgo(date.date)}</div>
                `;
                datesList.appendChild(dateEl);
            });
        }
        
        function getDaysAgo(dateString) {
            const date = new Date(dateString);
            const today = new Date();
            const diffTime = Math.abs(today - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) return 'اليوم';
            if (diffDays === 1) return 'غدًا';
            if (diffDays < 7) return `بعد ${diffDays} أيام`;
            if (diffDays < 30) return `بعد ${Math.floor(diffDays/7)} أسابيع`;
            if (diffDays < 365) return `بعد ${Math.floor(diffDays/30)} أشهر`;
            return `بعد ${Math.floor(diffDays/365)} سنوات`;
        }
    </script>
</body>
</html>
